# Generated by BehavEd
# ( "player wins the battle here" )
setDefaultTarget("" )
setGameFlag("bosses", 18, 1 )

copyOriginAndAngles("dead_hero", "wp_getim01" )
cameraMove(" 765.700 -3653.690 90.000 ", 0.500 )
cameraPan(" 0.000 33.000 101.800 ", 0.500, "FALSE" )
spawnEffect("dead_hero", "base/powerup/pu_burning", " 0.000 0.000 40.000 ", " 0.000 0.000 0.000 " )
waittimed ( 0.800 )

# Phoenix beats Mephisto:
playanim (  "EA_POWER1", "dead_hero", "NONE", "" )
spawnEffect("dead_hero", "base/powerup/pu_burning", " 0.000 0.000 40.000 ", " 0.000 0.000 0.000 " )
waittimed ( 0.800 )

playanim (  "EA_PAIN_HIGH1", "mephisto", "NONE", "" )
waittimed ( 0.500 )

setCombatNode("dead_hero", "power_smash" )
spawnEffect("dead_hero", "base/powerup/pu_burning", " 0.000 0.000 40.000 ", " 0.000 0.000 0.000 " )
waittimed ( 0.800 )

spawnEffect("mephisto", "map/mephisto/mephisto_explode", " 0.000 0.000 0.000 ", " 0.000 0.000 0.000 " )
spawn("mephisto", "mephisto_treasure", "mephisto_treasure", " 0.000 0.000 0.000 ", " 0.000 0.000 0.000 " )
objective ( "Mephisto_Obj20",  "EOBJCMD_COMPLETE" )
objective ( "Mephisto_Obj70",  "EOBJCMD_COMPLETE" )
# ( "get the locked character from a gameflag" )
get_locked_char_id_num = getGameVar("sacd_hero" )
got_locked_char_name = getHeroName(get_locked_char_id_num )
unlockCharacter(got_locked_char_name, "SKIN" )
awardAchievement("", "defeated_mephisto" )
setGameFlag("bosses", 18, 1 )
awardReputation("", 125 )
remove ( "mephisto", "mephisto" )
waittimed ( 4.000 )
endCutScene("FALSE", "TRUE" )
# make Nightcrawler bamf:
setallaiactive("FALSE" )
#setAIActive("dead_hero", "TRUE" )
#DEBUG:
#setFollowingHero("dead_hero", "TRUE" )
#waittimed ( 0.800 )
#waittimed ( 1.100 )
#remove ( "dead_hero", "dead_hero" )

# above does not seem to work, settle for this:
remove ( "dead_hero", "dead_hero" )
waittimed ( 0.500 )

setallaiactive("TRUE" )

# Fury talks:
startConversation("act2/mephisto/mephisto4/2_mephisto4_050" )
